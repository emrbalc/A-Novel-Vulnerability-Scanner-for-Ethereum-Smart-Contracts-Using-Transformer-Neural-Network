import os
import subprocess
from os import listdir
from os.path import isfile, join
import csv

mypath = join(os.path.expanduser('~'), 'MAIAN', 'tool', 'contractFolder')
onlyfiles = [f for f in listdir(mypath) if isfile(join(mypath, f))]
for file in onlyfiles:
    address_name = file.split("_")
    suicidal = subprocess.Popen('python3 maian.py -s ' + mypath + '/' + file + ' ' +
                                address_name[1].split('.')[0] + ' ' + ' -c 0', shell=True, stdout=subprocess.PIPE).stdout
    prodigal = subprocess.Popen('python3 maian.py -s ' + mypath + '/' + file + ' ' +
                                address_name[1].split('.')[0] + ' ' + ' -c 1', shell=True, stdout=subprocess.PIPE).stdout
    greedy = subprocess.Popen('python3 maian.py -s ' + mypath + '/' + file + ' ' +
                              address_name[1].split('.')[0] + ' ' + ' -c 2', shell=True, stdout=subprocess.PIPE).stdout
    print("suicical = ", suicidal.read())
    print("prodigal = ", prodigal.read())
    print("greedy = ", greedy.read())
